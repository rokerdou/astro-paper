@import "tailwindcss";
@import "./typography.css";

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

:root,
html[data-theme="light"] {
  --background: #f9fafb;
  --foreground: #111827;
  --accent: #0066cc;
  --muted: #f3f4f6;
  --muted-foreground: #6b7280;
  --border: #e5e7eb;
}

html[data-theme="dark"] {
  --background: #121212;
  --foreground: #e5e7eb;
  --accent: #60a5fa;
  --muted: #1e1e1e;
  --muted-foreground: #9ca3af;
  --border: #374151;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-accent: var(--accent);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-border: var(--border);
}

@layer base {
  * {
    @apply border-border outline-accent/75;
    scrollbar-width: auto;
    scrollbar-color: var(--color-muted) transparent;
  }
  html {
    @apply overflow-y-scroll scroll-smooth;
  }
  body {
    @apply flex min-h-svh flex-col bg-background font-sans text-foreground selection:bg-accent/75 selection:text-background;
    padding-top: 112px; /* Header height: 64px (main nav) + 48px (tags nav) */
  }

/* =========================================
   Clean White Theme (Color & Typography Only)
   ========================================= */
html[data-theme="clean-white"] {
  --background: #ffffff;
  --foreground: #333333; /* Dark Gray/Black */
  --accent: #4a90e2;     /* Light Blue */
  --muted: #f0f0f0;      /* Light Gray */
  --muted-foreground: #666666;
  --border: #e0e0e0;     /* Separator Gray */
}

/* Typography & Colors Overrides */
html[data-theme="clean-white"] body {
  @apply font-sans;
}

/* Headers with Pink Hash */
html[data-theme="clean-white"] h1, 
html[data-theme="clean-white"] h2, 
html[data-theme="clean-white"] h3, 
html[data-theme="clean-white"] #post-title {
  @apply font-bold relative text-[#333333];
}

html[data-theme="clean-white"] h1::before, 
html[data-theme="clean-white"] h2::before, 
html[data-theme="clean-white"] h3::before, 
html[data-theme="clean-white"] #post-title::before {
  content: "# ";
  color: #d0021b; /* Pink Hash */
  margin-right: 0.25em;
}

/* Links (Blue) */
html[data-theme="clean-white"] article a {
  color: #0000ff;
  text-decoration-color: #0000ff;
}

/* Navigation Menu Colors (Standard Top Nav) */
html[data-theme="clean-white"] header {
  @apply bg-white border-b border-[#e0e0e0];
}

/* Ensure header content spans full width, remove max-width and centering */
html[data-theme="clean-white"] #nav-container {
  @apply max-w-full mx-0;
}

html[data-theme="clean-white"] #top-nav-wrap {
  @apply w-full;
}

html[data-theme="clean-white"] header a {
  @apply text-[#333333];
}

html[data-theme="clean-white"] header a.active-nav {
  @apply bg-[#f0f0f0] text-[#333333] decoration-0 rounded px-2; 
}

/* Article List Styling */
html[data-theme="clean-white"] .card-container li {
  @apply border-b border-[#e0e0e0] pb-4 mb-4;
}

html[data-theme="clean-white"] .card-container li > a {
  @apply border-0 shadow-none hover:shadow-none hover:translate-y-0 bg-white p-4 rounded-md transition-colors;
}

/* Selected/Hover Article Background */
html[data-theme="clean-white"] .card-container li > a:hover {
  background-color: #e6f7ff; /* Light Blue */
}

/* Card Text Colors */
html[data-theme="clean-white"] .card-container li > a > div > h2,
html[data-theme="clean-white"] .card-container li > a > div > h3 {
  @apply text-[#333333] font-bold;
}

html[data-theme="clean-white"] .card-container li > a > div > div:nth-child(2) { /* Date/Author line */
  @apply text-[#888888];
}

html[data-theme="clean-white"] .card-container li > a > div > p {
  @apply text-[#333333]/80;
}


/* Pagination Buttons */
html[data-theme="clean-white"] nav.pagination-wrapper {
  @apply mt-8 flex justify-center;
}

html[data-theme="clean-white"] nav[aria-label="Pagination"] a {
  @apply bg-[#f0f0f0] text-[#333333] border border-[#cccccc] hover:bg-[#e0e0e0] px-4 py-2 rounded-md font-normal;
}

/* Disabled State */
html[data-theme="clean-white"] .disabled-prev,
html[data-theme="clean-white"] .disabled-next {
   @apply opacity-50 cursor-not-allowed bg-[#f0f0f0] border-[#cccccc] text-[#333333];
}

  a,
  button {
    @apply outline-offset-1 outline-accent focus-visible:no-underline focus-visible:outline-2 focus-visible:outline-dashed;
  }
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }
  section {
    @apply w-full mx-auto max-w-7xl px-4;
  }
}

@utility max-w-app {
  @apply max-w-7xl;
}

.active-nav {
  @apply underline decoration-wavy decoration-2 underline-offset-4;
}

/* Source: https://piccalil.li/blog/a-more-modern-css-reset/ */
/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 1rem;
}

/* 动画效果 */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.5s ease-out;
}

/* 文本截断工具类 */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* 文章图片样式 - 限制最大高度为视口高度的 2/3 */
.app-prose img {
  @apply mx-auto border border-border rounded;
  max-height: 66vh;
  width: auto;
  object-fit: contain;
}
